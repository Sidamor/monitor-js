!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);window.Monitor=r.a,t.default=r.a},function(e,t,n){"use strict";var r=n(2),i=n.n(r),o=n(5),s=n(6),a=n.n(s),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var s=t[i](o),a=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});e(a)}("next")})}}t.a=class extends o.a{constructor(e={}){super();let{exclude:t=[],match:n=[],url:r,autoPush:i=!0}=e,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["exclude","match","url","autoPush"]);this.config=o,this.exclude=t,this.match=n,this.url=r,this.autoPush=i,this.plugins=[]}initEvent(){this.windowError(),this.domEvent()}setConfig(e={}){return this.config=u({},this.config,e),this}addPlugin(e){return this.plugins.push(e),this}captureException(e,t){var n=this;return c(function*(){let r=new XMLHttpRequest;r.timeout=1e4,r.open("POST",n.url,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4!=r.readyState||200!=r.status&&304!=r.status||t&&t.call(this,r.responseText)},r.send(i.a.stringify(u({},e,{actions:JSON.stringify(e.actions)})))})()}getCurrInfo(){return this.device||(this.device=(new a.a).getDevice()),u({},this.device,{reportTime:this.dateFormat(new Date,"yyyy-MM-dd hh:mm:sss"),url:window.location.href},this.config)}dateFormat(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t}install(){let e=0;for(;e<this.plugins.length;)this.plugins[e].call(this),e++;return this.initEvent(),this}pushException(e={}){if(this.isDomainfilter())return;if(this.isErrorfilter(e.details))return;let t=u({},this.getCurrInfo(),{actions:this.getStorageAction()},e);delete t.browserVer,this.emit("captureBefore",t),this.autoPush&&this.captureException(t)}isErrorfilter(e){return this.exclude.filter(t=>-1!==e.indexOf(t)).length>0}isDomainfilter(){let e=window.location.href;return!(this.match.filter(t=>-1!==e.indexOf(t)).length>=0)}windowError(){var e=this;return c(function*(){window.onerror=function(t,n,r,i,o){let s=`${t}  line：${r}`;e.pushException({route:n,details:s,errorDetails:o&&o.stack})}})()}getStorageAction(){let e=sessionStorage.getItem("_actions");if(!e)return[];try{return JSON.parse(e)||[]}catch(e){return[]}}setStorageAction(e){if("string"!=typeof e){e instanceof Array&&e.length>8&&e.shift();try{sessionStorage.setItem("_actions",JSON.stringify(e))}catch(e){}}else sessionStorage.setItem("_actions",e)}domEvent(){var e=this;return c(function*(){window.addEventListener("click",function(t){let n=e.getStorageAction(),r=e.getHTML(t);r&&(n.push({type:t.type,target:r,time:e.dateFormat(new Date,"yyyy-MM-dd hh:mm:sss")}),e.setStorageAction(n))})})()}getHTML(e){let{localName:t,id:n,className:r,innerText:i=""}=e.target;if(-1!==["body","html"].indexOf(t))return"";let o=e.target.getAttribute("action");return n=n&&`id="${n}"`||"",r=r&&`className="${r}"`||"",`<${t} ${o=o&&`action="${o}"`||""} ${n} ${r}>${i=i.replace(/\s/g,"").substring(0,20)}</${t}>`}}},function(e,t,n){"use strict";t.decode=t.parse=n(3),t.encode=t.stringify=n(4)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,g=e[l].replace(a,"%20"),y=g.indexOf(n);y>=0?(f=g.substr(0,y),h=g.substr(y+1)):(f=g,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),function(s){var a=encodeURIComponent(r(s))+n;return i(e[s])?o(e[s],function(e){return a+encodeURIComponent(r(e))}).join(t):a+encodeURIComponent(r(e[s]))}).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";t.a=class{constructor(){this.listens={}}on(e,t){let n=this.listens[e];return this.listens[e]=n||[],this.listens[e].push(t),this}emit(e,t){let n=this.listens[e];return n&&n.length>0&&n.map(e=>{e.call(this,t)}),this}remove(e,t){let n=this.listens[e];if(t){let r=n.filter(e=>e!==t);return r.length!==n.length&&(this.listens[e]=r),this}return this.listens[e]=void 0,this}removeAll(){return this.listens={},this}}},function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};window.Device=i.default,t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=n(2))&&r.__esModule?r:{default:r},s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t)return this.ua=t.toLowerCase();if(window)return this.ua=window.navigator.userAgent.toLowerCase();throw new Error("userAgent is not defined！")}return i(e,[{key:"getDevice",value:function(){var e={browserVer:"",browserName:"",phoneSystemType:"",phoneSystemVer:"",phoneName:""};if(e.browserName=this.getBrowser(),this.isMobile()){var t=this.getPhoneSystemType();return"IOS"==t&&(e.phoneSystemVer=this.getIOSV(),e.phoneName=(new o.default).getPhoneType()),"Android"==t&&(e.phoneSystemVer=this.getAndroidV(),e.phoneName="Android"),e.phoneSystemType=t,e}return e}},{key:"getAndroidV",value:function(){var e=this.ua,t="";return e.indexOf("android")>0&&(t=(e.match(/android [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")),t}},{key:"getIOSV",value:function(){var e=this.ua,t="";return e.indexOf("like mac os x")>0&&(t=(e.match(/os [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")),t}},{key:"getPhoneSystemType",value:function(){var e=this.ua,t=e.indexOf("android")>-1||e.indexOf("adr")>-1,n=!!e.match(/\(i[^;]+;( u;)? cpu.+mac os x/),r=e.indexOf("Windows Phone".toLowerCase())>-1;return t?"Android":n?"IOS":r?"Windows Phone":""}},{key:"isPC",value:function(){return!this.ua.match(/(iPhone|iPod|android|ios|iPad|windows phone|tablet)/i)}},{key:"isMobile",value:function(){return!this.isPC()}},{key:"getBrowser",value:function(){var e=this.ua,t=function(t){return e.indexOf(t.toLowerCase())>-1};return t("Opera")?"Opera":t("compatible")&&t("MSIE")?"IE":t("NET4.0C")&&t("rv")&&t("Windows")?"IE":"ActiveXObject"in window?"IE11":t("Edge")&&t("NT")?"Edge":t("Firefox")?"Firefox":t("micromessenger")?"WeiXin":t("UCBrowser")?"UCBrowser":t("QQBrowser")?"QQBrowser":t("Safari")&&!t("Chrome")?"Safari":t("Safari")&&t("Chrome")?"Chrome":""}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.devices={"Apple A7 GPU":{1136:["iPhone 5","iPhone 5s"],2048:["iPad Air","iPad Mini 2","iPad Mini 3"]},"Apple A8 GPU":{1136:["iPod touch (6th generation)"],1334:["iPhone 6"],2001:["iPhone 6 Plus"],2048:["iPad Air 2","iPad Mini 4"]},"Apple A9 GPU":{1136:["iPhone SE"],1334:["iPhone 6s"],2001:["iPhone 6s Plus"],2224:["iPad Pro (9.7-inch)"],2732:["iPad Pro (12.9-inch)"]},"Apple A10 GPU":{1334:["iPhone 7"],2001:["iPhone 7 Plus"]},"Apple A11 GPU":{1334:["iPhone 8"],2208:["iPhone 8 Plus"],2436:["iPhone X"]}}}return r(e,[{key:"getGlRenderer",value:function(){try{var e=document.createElement("canvas").getContext("experimental-webgl"),t=e.getExtension("WEBGL_debug_renderer_info");return e.getParameter(t.UNMASKED_RENDERER_WEBGL)}catch(e){return""}}},{key:"getHeight",value:function(){return Math.max(screen.width,screen.height)*(window.devicePixelRatio||1)}},{key:"getPhoneType",value:function(e){var t=this.getHeight();e=e||this.getGlRenderer();var n=this.devices[e];return n&&n[t][0]?n[t][0]:""}}]),e}();t.default=i}])},e.exports=r()}])});